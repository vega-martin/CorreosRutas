{% extends "base.html" %}

{% block content %}

    <h1>Visualizador de puntos de parada</h1>

    <div class="formulario">
        <h2>Elegir fichero A</h2>
        <form method="POST" action="{{ url_for('fileUpload.upload_file_A') }}" enctype="multipart/form-data">
            <input type="file" name="fileA" accept=".csv" required>
            <input type="submit" value="Subir Fichero A">
        </form>
        <br>

        <h2>Elegir fichero B</h2>
        <form method="POST" action="{{ url_for('fileUpload.upload_file_B') }}" enctype="multipart/form-data">
            <input type="file" name="fileB" accept=".csv" required>
            <input type="submit" value="Subir Fichero B">
        </form>
        <br>

        <h2>Elegir fichero C</h2>
        <form method="POST" action="{{ url_for('fileUpload.upload_file_C') }}" enctype="multipart/form-data">
            <input type="file" name="fileC" accept=".csv" required>
            <input type="submit" value="Subir Fichero C">
        </form>
        <br>
    </div>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert alert-{{ category }}">{{ message }}</div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <div class="formulario">
        <h2>Seleccionar PDAs</h2>
        <select name="pdaSelect" id="pdaSelect" multiple>
            
        </select>
    </div>

    <div class="formulario">
        <h2>Seleccionar Fechas</h2>
        <label for="fechaInicio">Fecha de inicio:</label>
        <select name="fechaInicio" id="fechaInicio">

        </select>

        <label for="fechaFin">Fecha de final:</label>
        <select name="fechaFin" id="fechaFin">

        </select>
        <br>
    </div>
    <br>
    <div class="acciones">
        <form action="{{ url_for('generateResults.generate_map') }}" method="post">
            <button type="submit">Generar mapa</button>
        </form>
        <form action="{{ url_for('generateResults.detect_stops') }}" method="post">
            <button type="submit">Detectar paradas</button>
        </form>
        <form action="{{ url_for('generateResults.generate_stops') }}" method="post">
            <button type="submit">Generar mapa con puntos de paradas</button>
        </form>
        <form action="{{ url_for('generateResults.generate_graph') }}" method="post">
            <button type="submit">Gr√°fica velodad/tiempo</button>
        </form>
    </div>

    <div class="mapa">
        <h2>Mapa generado</h2>
        <iframe id="mapaRenderizado" src="" width="100%" height="500px" style="border:1px solid #ccc;"></iframe>
        <br>
        <a id="descagarMapa" href="#" target="_blank">Descargar Mapa</a>
    </div>

{% endblock %}